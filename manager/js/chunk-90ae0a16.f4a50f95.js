(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90ae0a16"],{2880:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bulk-sign"},[t("div",{staticClass:"box"},[t("h4",{staticClass:"rule"},[e._v("认购数量及私钥均以英文逗号分隔,请勿输入空格或回车")]),t("span",[e._v("认购数量(最小100，最大2000)")]),t("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: 100,200,300"},model:{value:e.amounts,callback:function(t){e.amounts=t},expression:"amounts"}}),t("span",[e._v("私钥")]),t("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: aa...456,bb...123,cc...789"},model:{value:e.privateKeys,callback:function(t){e.privateKeys=t},expression:"privateKeys"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}]},[e._v("授权签名结果(点击复制)")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}],staticClass:"rawTransaction",on:{click:e.copyRawApproves}},[e._v(e._s(e.rawApproves))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}]},[e._v("认购签名结果(点击复制)")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}],staticClass:"rawTransaction",on:{click:e.copyRawSubscribes}},[e._v(e._s(e.rawSubscribes))]),t("van-button",{attrs:{loading:e.isLoading,"loading-text":"签名中..."},on:{click:e.confirm}},[e._v("批量签名")])],1)])},s=[],i=(n("e17f"),n("2241")),r=(n("e7e5"),n("d399")),p=(n("be7f"),n("565f")),o=(n("66b9"),n("b650")),u=(n("14d9"),n("2351")),l=n("e45c");function d(e){const t=e.trim();return/^(0x|0X)?[0-9a-fA-F]{64}$/.test(t)}var y={components:{[o["a"].name]:o["a"],[p["a"].name]:p["a"]},data(){return{isLoading:!1,amounts:"",privateKeys:"",rawApproves:!1,rawSubscribes:!1}},methods:{copyRawApproves(){this.$copyText(this.rawApproves).then(e=>{r["a"].success("授权签名结果已复制")},e=>{r["a"].fail("无法复制")})},copyRawSubscribes(){this.$copyText(this.rawSubscribes).then(e=>{r["a"].success("认购签名结果已复制")},e=>{r["a"].fail("无法复制")})},async signTransaction(e,t){this.isLoading=!0;const n=new this.$web3.eth.Contract(u.abi,u.address),a=new this.$web3.eth.Contract(l.abi,l.address),s=e.map(e=>a.methods.approve(u.address,e.toWei()).encodeABI()),i=e.map(e=>n.methods.subscribe(e.toWei()).encodeABI()),p=[],o=[];for(let y=0;y<t.length;y++)try{const e=this.$web3.eth.accounts.privateKeyToAccount(t[y]),n=await e.signTransaction({gas:21644,to:l.address,data:s[y]}),a=await e.signTransaction({gas:21276,to:u.address,data:i[y]});p.push(n.rawTransaction),o.push(a.rawTransaction)}catch(d){return console.error(d),r["a"].fail("签名失败，请重试")}this.rawApproves=p.join(),this.rawSubscribes=o.join(),this.isLoading=!1},confirm(){if(0===this.amounts.length)return r["a"].fail("请输入认购数量");if(0===this.privateKeys.length)return r["a"].fail("请输入私钥");const e=this.amounts.split(","),t=this.privateKeys.split(",");if(e.length!==t.length)return i["a"].alert({message:`当前认购数量为${e.length}条，私钥为${t.length}条，认购数量和私钥必须相对应，请仔细核对`}).then(()=>{});for(let n=0;n<e.length;n++){if(e[n]<100)return i["a"].alert({message:"认购数量不能小于100，请仔细核对"}).then(()=>{});if(e[n]>2e3)return i["a"].alert({message:"认购数量不能大于2000，请仔细核对"}).then(()=>{});if(!d(t[n]))return i["a"].alert({message:"私钥不正确，请仔细核对"}).then(()=>{})}i["a"].confirm({message:`是否签名${e.length}条交易。签名成功后请先发送授权签名，请勿同时发送授权签名和认购签名，可能会导致授权不及时认购失败`}).then(()=>{this.signTransaction(e,t)}).catch(()=>{})}}},c=y,m=c,b=(n("9134"),n("601f"),n("2877")),f=Object(b["a"])(m,a,s,!1,null,"229ea114",null);t["default"]=f.exports},"601f":function(e,t,n){"use strict";n("c9b0")},9134:function(e,t,n){"use strict";n("fb5f")},c9b0:function(e,t,n){},e45c:function(e){e.exports=JSON.parse('{"address":"0x55d398326f99059fF775485246999027B3197955","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')},fb5f:function(e,t,n){}}]);