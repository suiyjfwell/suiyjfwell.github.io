(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f57e74b"],{1601:function(e,t,n){},2880:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"bulk-sign"},[t("div",{staticClass:"box"},[t("h4",{staticClass:"rule"},[e._v(" 认购数量及私钥均以英文逗号分隔,请勿输入空格或回车，若只填一个认购数量则视为统一使用此数量 ")]),t("span",[e._v("认购数量(最小100，最大2000)")]),t("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: 100,200,300"},model:{value:e.amounts,callback:function(t){e.amounts=t},expression:"amounts"}}),t("span",[e._v("私钥")]),t("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: aa...456,bb...123,cc...789"},model:{value:e.privateKeys,callback:function(t){e.privateKeys=t},expression:"privateKeys"}}),t("span",[e._v("已签名条数："+e._s(e.signedCount))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}]},[e._v("授权签名结果(点击复制)")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}],staticClass:"rawTransaction",on:{click:e.copyRawApproves}},[e._v(e._s(e.rawApproves))]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}]},[e._v("认购签名结果(点击复制)")]),t("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}],staticClass:"rawTransaction",on:{click:e.copyRawSubscribes}},[e._v(e._s(e.rawSubscribes))]),t("van-button",{attrs:{loading:e.isLoading,"loading-text":"签名中..."},on:{click:e.confirm}},[e._v("批量签名")])],1)])},s=[],i=(n("e17f"),n("2241")),r=(n("e7e5"),n("d399")),o=(n("be7f"),n("565f")),p=(n("66b9"),n("b650")),u=(n("14d9"),n("2351")),l=n("e45c");function d(e){const t=e.trim();return/^(0x|0X)?[0-9a-fA-F]{64}$/.test(t)}var c={components:{[p["a"].name]:p["a"],[o["a"].name]:o["a"]},data(){return{isLoading:!1,amounts:"",privateKeys:"",rawApproves:!1,rawSubscribes:!1,signedCount:0}},methods:{copyRawApproves(){this.$copyText(this.rawApproves).then(e=>{r["a"].success("授权签名结果已复制")},e=>{r["a"].fail("无法复制")})},copyRawSubscribes(){this.$copyText(this.rawSubscribes).then(e=>{r["a"].success("认购签名结果已复制")},e=>{r["a"].fail("无法复制")})},async signTransaction(e,t){this.isLoading=!0;const n=new this.$web3.eth.Contract(u.abi,u.address),a=new this.$web3.eth.Contract(l.abi,l.address),s=[],i=[];for(let r=0;r<t.length;r++){const t=1===e.length?e[0]:e[r];s.push(a.methods.approve(u.address,t.toWei()).encodeABI()),i.push(n.methods.subscribe(t.toWei()).encodeABI())}const o=[],p=[];for(let c=0;c<t.length;c++)try{const e=this.$web3.eth.accounts.privateKeyToAccount(t[c]),n=await e.signTransaction({gas:66159,to:l.address,data:s[c]}),a=await e.signTransaction({gas:99239,to:u.address,data:i[c]});o.push(n.rawTransaction),p.push(a.rawTransaction),this.signedCount++}catch(d){return console.error(d),this.isLoading=!1,r["a"].fail("签名失败，请重试")}this.rawApproves=o.join(),this.rawSubscribes=p.join(),this.isLoading=!1},confirm(){if(0===this.amounts.length)return r["a"].fail("请输入认购数量");if(0===this.privateKeys.length)return r["a"].fail("请输入私钥");const e=this.amounts.split(","),t=this.privateKeys.split(",");if(1!==e.length&&e.length!==t.length)return i["a"].alert({message:`当前认购数量为${e.length}条，私钥为${t.length}条，认购数量和私钥必须相对应，请仔细核对`}).then(()=>{});for(let n=0;n<t.length;n++){const a=1===e.length?e[0]:e[n];if(a<100)return i["a"].alert({message:"认购数量不能小于100，请仔细核对"}).then(()=>{});if(a>2e3)return i["a"].alert({message:"认购数量不能大于2000，请仔细核对"}).then(()=>{});if(!d(t[n]))return i["a"].alert({message:"私钥不正确，请仔细核对"}).then(()=>{})}i["a"].confirm({message:`是否签名${t.length}条交易。签名成功后请先发送授权签名，请勿同时发送授权签名和认购签名，可能会导致授权不及时认购失败`}).then(()=>{this.signTransaction(e,t)}).catch(()=>{})}}},y=c,m=y,b=(n("fcc3"),n("ce15"),n("2877")),f=Object(b["a"])(m,a,s,!1,null,"01c96796",null);t["default"]=f.exports},c780:function(e,t,n){},ce15:function(e,t,n){"use strict";n("c780")},e45c:function(e){e.exports=JSON.parse('{"address":"0x55d398326f99059fF775485246999027B3197955","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')},fcc3:function(e,t,n){"use strict";n("1601")}}]);