(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d5a49fe2"],{2880:function(e,t,n){"use strict";n.r(t);var a,s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bulk-sign"},[n("div",{staticClass:"box"},[n("h4",{staticClass:"rule"},[e._v(" 认购数量及私钥均以英文逗号分隔,请勿输入空格或回车，若只填一个认购数量则视为统一使用此数量 ")]),n("span",[e._v("认购数量(最小100，最大2000)")]),n("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: 100,200,300"},model:{value:e.amounts,callback:function(t){e.amounts=t},expression:"amounts"}}),n("span",[e._v("私钥")]),n("van-field",{attrs:{autosize:"",autofocus:"",type:"textarea",placeholder:"例: aa...456,bb...123,cc...789"},model:{value:e.privateKeys,callback:function(t){e.privateKeys=t},expression:"privateKeys"}}),n("span",[e._v("已签名条数："+e._s(e.signedCount))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}]},[e._v("授权签名结果(点击复制)")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rawApproves,expression:"rawApproves"}],staticClass:"rawTransaction",on:{click:e.copyRawApproves}},[e._v(e._s(e.rawApproves))]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}]},[e._v("认购签名结果(点击复制)")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rawSubscribes,expression:"rawSubscribes"}],staticClass:"rawTransaction",on:{click:e.copyRawSubscribes}},[e._v(e._s(e.rawSubscribes))]),n("van-button",{attrs:{loading:e.isLoading,"loading-text":"签名中..."},on:{click:e.confirm}},[e._v("批量签名")])],1)])},r=[],i=(n("99af"),n("a15b"),n("b0c0"),n("ac1f"),n("1276"),n("498a"),n("e17f"),n("2241")),o=(n("e7e5"),n("d399")),u=(n("96cf"),n("1da1")),p=n("ade3"),c=(n("be7f"),n("565f")),d=(n("66b9"),n("b650")),l=n("2351"),y=n("e45c");function f(e){var t=e.trim();return/^(0x|0X)?[0-9a-fA-F]{64}$/.test(t)}var m={components:(a={},Object(p["a"])(a,d["a"].name,d["a"]),Object(p["a"])(a,c["a"].name,c["a"]),a),data:function(){return{isLoading:!1,amounts:"",privateKeys:"",rawApproves:!1,rawSubscribes:!1,signedCount:0}},methods:{getDatas:function(e,t){for(var n=new this.$web3.eth.Contract(l.abi,l.address),a=new this.$web3.eth.Contract(y.abi,y.address),s=[],r=[],i=0;i<t.length;i++){var o=1===e.length?e[0]:e[i];s.push(a.methods.approve(l.address,o.toWei()).encodeABI()),r.push(n.methods.subscribe(o.toWei()).encodeABI())}return{approve:s,subscribe:r}},signTransaction:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function a(){var s,r,i,u,p,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n.isLoading=!0,s=n.getDatas(e,t),r=[],i=[],u=0;case 4:if(!(u<t.length)){a.next=26;break}return a.prev=5,p=n.$web3.eth.accounts.privateKeyToAccount(t[u]),a.next=9,p.signTransaction({gas:66159,to:y.address,data:s.approve[u]});case 9:return c=a.sent,a.next=12,p.signTransaction({gas:189080,to:l.address,data:s.subscribe[u]});case 12:d=a.sent,r.push(c.rawTransaction),i.push(d.rawTransaction),n.signedCount++,a.next=23;break;case 18:return a.prev=18,a.t0=a["catch"](5),console.error(a.t0),n.isLoading=!1,a.abrupt("return",o["a"].fail("签名失败，请重试"));case 23:u++,a.next=4;break;case 26:n.rawApproves=r.join(),n.rawSubscribes=i.join(),n.isLoading=!1;case 29:case"end":return a.stop()}}),a,null,[[5,18]])})))()},confirm:function(){var e=this;if(0===this.amounts.length)return o["a"].fail("请输入认购数量");if(0===this.privateKeys.length)return o["a"].fail("请输入私钥");var t=this.amounts.split(","),n=this.privateKeys.split(",");if(1!==t.length&&t.length!==n.length)return i["a"].alert({message:"当前认购数量为".concat(t.length,"条，私钥为").concat(n.length,"条，认购数量和私钥必须相对应，请仔细核对")}).then((function(){}));for(var a=0;a<n.length;a++){var s=1===t.length?t[0]:t[a];if(s<100)return i["a"].alert({message:"认购数量不能小于100，请仔细核对"}).then((function(){}));if(s>2e3)return i["a"].alert({message:"认购数量不能大于2000，请仔细核对"}).then((function(){}));if(!f(n[a]))return i["a"].alert({message:"私钥不正确，请仔细核对"}).then((function(){}))}i["a"].confirm({message:"是否签名".concat(n.length,"条交易。签名成功后请先发送授权签名，请勿同时发送授权签名和认购签名，可能会导致授权不及时认购失败")}).then((function(){e.signTransaction(t,n)})).catch((function(){}))},copyRawApproves:function(){this.$copyText(this.rawApproves).then((function(e){o["a"].success("授权签名结果已复制")}),(function(e){o["a"].fail("无法复制")}))},copyRawSubscribes:function(){this.$copyText(this.rawSubscribes).then((function(e){o["a"].success("认购签名结果已复制")}),(function(e){o["a"].fail("无法复制")}))}}},b=m,v=b,w=(n("fcd8"),n("be79"),n("2877")),h=Object(w["a"])(v,s,r,!1,null,"01c96796",null);t["default"]=h.exports},"3f00":function(e,t,n){},"498a":function(e,t,n){"use strict";var a=n("23e7"),s=n("58a8").trim,r=n("c8d2");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},a15b:function(e,t,n){"use strict";var a=n("23e7"),s=n("44ad"),r=n("fc6a"),i=n("a640"),o=[].join,u=s!=Object,p=i("join",",");a({target:"Array",proto:!0,forced:u||!p},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},b81f:function(e,t,n){},be79:function(e,t,n){"use strict";n("b81f")},c8d2:function(e,t,n){var a=n("d039"),s=n("5899"),r="​᠎";e.exports=function(e){return a((function(){return!!s[e]()||r[e]()!=r||s[e].name!==e}))}},e45c:function(e){e.exports=JSON.parse('{"address":"0x55d398326f99059fF775485246999027B3197955","abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')},fcd8:function(e,t,n){"use strict";n("3f00")}}]);